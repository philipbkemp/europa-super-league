<textarea id="json-in" style="margin-bottom:10px;width:100%;height:200px;"></textarea>
<button id="json-parse" style="margin-bottom:10px;">Parse</button>
<button id="json-clear" style="margin-bottom:10px;opacity:0.3;">Clear</button>

<textarea id="json-out" style="margin-bottom:10px;width:100%;height:500px;"></textarea>

<script>
	thisSeason = [];

	newTeams = [];
	returningTeams = ["SC_Bettembourg","Ipswich_Town_F.C.","Leicester_City_F.C.","Southampton_F.C.","K_Beerschot_VA","F.C.V._Dender_E.H."];

	redirects = [
	];
	redirectMe = {};
	redirects.forEach(r=>{
		redirectMe[r[0]] = r[1];
	});

	seasonDone = [];

	document.getElementById("json-clear").addEventListener("click",function(){
		thisSeason = [];
		document.getElementById("json-out").value = JSON.stringify(thisSeason).replaceAll("{","\n{").replaceAll("]","\n]");
	});

	document.getElementById("json-parse").addEventListener("click",function(){
		console.clear();
		theData = JSON.parse(document.getElementById("json-in").value);
		theData.forEach(team=>{
			if ( newTeams.includes(team.id) ) {
				team.isNew = true;
			}
			if ( returningTeams.includes(team.id) ) {
				team.isReturning = true;
			}
			if ( typeof redirectMe[team.id] !== "undefined" ) {
				team.id = redirectMe[team.id];
			}
			if ( ! seasonDone.includes(team.country) ) {
				team.isCurrentSeason = true;
			}
			thisSeason.push(team);
		});
		document.getElementById("json-out").value = JSON.stringify(thisSeason).replaceAll("{","\n{").replaceAll("]","\n]");
	});
</script>